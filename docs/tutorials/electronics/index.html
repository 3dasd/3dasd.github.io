<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Electronics #  This page walks you through obtaining and putting together all the electronics components required for building a 3dasd scanner.
Ordering everything #  You need to get the following:
 two PCBs (main and power supply) with a bunch of electronic components two sets of NEMA 17 stepper motors and A4988 drivers Garmin LIDAR-Lite v3 a Raspberry Pi Zero W an Arduino Nano a slip-ring a 12V 2A power supply wires for making the cables  Getting the PCBs #  You need to get two PCBs: the scanner and the scanner-power-supply."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Electronics"><meta property="og:description" content="Electronics #  This page walks you through obtaining and putting together all the electronics components required for building a 3dasd scanner.
Ordering everything #  You need to get the following:
 two PCBs (main and power supply) with a bunch of electronic components two sets of NEMA 17 stepper motors and A4988 drivers Garmin LIDAR-Lite v3 a Raspberry Pi Zero W an Arduino Nano a slip-ring a 12V 2A power supply wires for making the cables  Getting the PCBs #  You need to get two PCBs: the scanner and the scanner-power-supply."><meta property="og:type" content="article"><meta property="og:url" content="https://3dasd.com/docs/tutorials/electronics/"><title>Electronics | 3dasd</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.8ac6e71f198033799bb4fe24413491992ae375cdfcbaa8927d90a443dbea9e6a.css integrity="sha256-isbnHxmAM3mbtP4kQTSRmSrjdc38uqiSfZCkQ9vqnmo="></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><img src=/logo.svg alt=Logo><span>3dasd</span></a></h2><ul><li><strong>Build instructions</strong></li><li><a href=/docs/tutorials/getting-started/>Getting started</a></li><li><a href=/docs/tutorials/electronics/ class=active>Electronics</a></li><li><a href=/docs/tutorials/mechanics/>Mechanics</a></li><li><a href=/docs/tutorials/assembly/>Assembly</a></li><li><a href=/docs/tutorials/software/>Software</a></li></ul><p> </p><ul><li><strong>Details</strong></li><li><a href=/docs/details/asdp-file/>.asdp file</a></li></ul><p> </p><ul><li><strong>Misc</strong></li><li><a href=https://examples.3dasd.com>Examples</a></li><li><a href=/docs/misc/contact/>Contact</a></li></ul><p> </p><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Electronics</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#ordering-everything>Ordering everything</a><ul><li><a href=#getting-the-pcbs>Getting the PCBs</a></li><li><a href=#connectors-and-hall-sensor>Connectors and Hall sensor</a></li><li><a href=#rest-of-the-modules>Rest of the modules</a></li></ul></li><li><a href=#soldering>Soldering</a></li><li><a href=#calibrating>Calibrating</a><ul><li><a href=#a4988-motor-current-tuning>A4988 motor current tuning</a></li></ul></li><li><a href=#cables>Cables</a></li></ul></nav></aside></header><article class=markdown><h1 id=electronics>Electronics
<a class=anchor href=#electronics>#</a></h1><p>This page walks you through obtaining and putting together all the electronics
components required for building a 3dasd scanner.</p><h2 id=ordering-everything>Ordering everything
<a class=anchor href=#ordering-everything>#</a></h2><p>You need to get the following:</p><ul><li>two PCBs (main and power supply) with a bunch of electronic components</li><li>two sets of NEMA 17 stepper motors and A4988 drivers</li><li>Garmin LIDAR-Lite v3</li><li>a Raspberry Pi Zero W</li><li>an Arduino Nano</li><li>a slip-ring</li><li>a 12V 2A power supply</li><li>wires for making the cables</li></ul><h3 id=getting-the-pcbs>Getting the PCBs
<a class=anchor href=#getting-the-pcbs>#</a></h3><p>You need to get two PCBs: the <strong>scanner</strong> and the <strong>scanner-power-supply</strong>. Both
designs are available in the <a href=https://github.com/3dasd/lidar-pcb>lidar-pcb</a>
Github repository. You could order PCBs with the Gerber files stored there from
any manufacturer.</p><p>The following describes the process of ordering from JLCPCB. It&rsquo;s probably the
easiest option as the designs include parts that are availble in their webshop
so you can order assembled PCBs.</p><p>Start at the <a href=https://cart.jlcpcb.com/quote#EZ>JCLPCB order page</a>. Click on
<code>Add gerber file</code> and upload the Gerber file you&rsquo;ve downloaded from
<a href=https://github.com/3dasd/lidar-pcb/raw/master/scanner/v4/Gerber_v4-2021-05-17.zip>here</a>.
The default options should work, you can leave them as is:</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-1.png style=max-width:50% alt data-zoomable></div><p>Enable the <code>SMT assembly</code> option and select how many of the PCBs you want
assembled:</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-2.png style=max-width:50% alt data-zoomable></div><p>Click <code>Confirm</code> to proceed to the next page where you need to upload the BOM
and CPL files downloaded from
<a href=https://raw.githubusercontent.com/3dasd/lidar-pcb/master/scanner/v4/BOM_v4-2021-05-17_2021-05-17.csv>here (BOM)</a>
and
<a href=https://raw.githubusercontent.com/3dasd/lidar-pcb/master/scanner/v4/PickAndPlace_v4-2021-05-17_2021-05-17.csv>here (CPL)</a>.</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-3.png style=max-width:80% alt data-zoomable></div><p>Hit <code>NEXT</code> to continue. You will be presented with a list of parts that JLCPCB
will solder onto the board.</p><details><summary>Inventory shortage for some parts?</summary><div class=markdown-inner><p>Depending on their inventory you may find that some
parts are not available (&ldquo;Inventory shortage&rdquo;). You can try replacing these with
equivalent parts (connectors with different color, other brand) using the
magnifying glass icon in that row.</p><p>I&rsquo;ve found that some items are avaible even if they&rsquo;re displayed as &ldquo;Inventory
shortage&rdquo;. Try to search for the same part using it&rsquo;s part ID first (the
<code>CXXXXXX</code> number).</p></div><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-4.png style=max-width:80% alt data-zoomable></div></details><p>JLCPCB isn&rsquo;t selling the following components, <strong>it&rsquo;s okay that you see &ldquo;No part
selected&rdquo; for A4988, Raspberry Pi Zero, arduino_nano</strong>:</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-5.png style=max-width:80% alt data-zoomable></div><p>If you&rsquo;re happy with the parts list, hit <code>NEXT</code> to continue. Then review the
placement, it should look something like this:</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-6.png style=max-width:50% alt data-zoomable></div><p>If you&rsquo;re satisfied with the list of parts, continue with <code>SAVE TO CART</code>. Now
you have the &ldquo;main PCB&rdquo; (<code>scanner</code>) in your cart. It&rsquo;s time to <strong>repeat the same
process with the &ldquo;power plug PCB&rdquo; (<code>scanner-power-supply</code>)</strong>. Go to the
<a href=https://cart.jlcpcb.com/quote#EZ>order page</a> and do the same thing but this
time you should upload
<a href=https://github.com/3dasd/lidar-pcb/raw/master/scanner-power-supply/v3/Gerber_v3-2021-04-01_2021-04-02.zip>this Gerber file</a>.</p><p>The power plug PCB is too small for automated assembly. You won&rsquo;t be able to
enable <code>SMT assembly</code> and will need to separately order parts for this PCB.</p><p>Once you&rsquo;re done with the second PCB, finish your order with <code>Secure Checkout</code>.</p><h3 id=connectors-and-hall-sensor>Connectors and Hall sensor
<a class=anchor href=#connectors-and-hall-sensor>#</a></h3><p>You can order the following from LCSC:</p><ul><li><code>3x JST PH-6 male</code>: one for the LIDAR connector and two for the motors</li><li><code>2x JST PH-4 male</code>: for the motors</li><li><code>2x JST PH-3 male</code>: for the Hall sensors</li><li><code>28+x JST PH crimping terminals</code>: for the connectors above (get more, they&rsquo;re
easy to screw up!)</li><li><code>1x screw terminal</code>: for the <code>scanner-power-supply</code> PCB</li><li><code>1x 5.5-2.0MM DC plug</code>: for the <code>scanner-power-supply</code> PCB</li><li><code>2x TLE4905 unipolar Hall sensor</code></li></ul><p>Download the parts list from <a href=https://github.com/3dasd/lidar-pcb/raw/master/scanner-misc/v3/scanner_misc_LCSC_Exported_20210518_012325.xlsx>here</a> and upload with the
<a href=https://lcsc.com/bom.html#/upload>LCSC BOM tool</a></p><p>Select &ldquo;LCSC Part number&rdquo; above the first column and &ldquo;Quantity&rdquo; above
&ldquo;Order Qty.&rdquo; then click <code>Next</code>:</p><div style=text-align:center><img src=https://3dasd.com/images/jlcpcb-order-7.png style=max-width:50% alt data-zoomable></div><p>Review the list of components. The quantities in the BOM should be enough to
complete the minimum of 5 <code>scanner-power-supply</code> PCBs you&rsquo;ve ordered in the
previous step and to assemble a <strong>single</strong> scanner. Adjust the quantities if
you need more (or less)!</p><p>If you&rsquo;re happy with the list, hit <code>Add to Cart</code>, then go to your cart and
finish your order.</p><h3 id=rest-of-the-modules>Rest of the modules
<a class=anchor href=#rest-of-the-modules>#</a></h3><p>Unfortunately the rest of the electronics are not available from a single
webshop, so you&rsquo;ll need to find the best place you can get them. Depending on
your location you can try ordering from Amazon, AliExpress or even better,
your favorite local electronics shop.</p><p>Here&rsquo;s what you need:</p><table><thead><tr><th>Item</th><th>Notes</th></tr></thead><tbody><tr><td><a href=https://buy.garmin.com/en-US/US/p/557294>Garmin LIDAR-Lite v3</a></td><td><code>v3 HP</code> might also work but I haven&rsquo;t tested that.</td></tr><tr><td><a href=https://www.omc-stepperonline.com/nema-17-stepper-motor/>2x 1.8deg NEMA 17 stepper motors</a></td><td><strong>Get two!</strong> Make sure you get ones with <strong>1.8deg step angle</strong>. I&rsquo;ve tested with <strong>0.4Nm torque</strong> motors, but that&rsquo;s probably overkill, especially for the Y axis.</td></tr><tr><td><a href=https://www.pololu.com/product/1182>2x A4988 stepper drivers</a></td><td><strong>Get two!</strong> Also available from other manufacturers.</td></tr><tr><td><a href=https://www.raspberrypi.org/products/raspberry-pi-zero-w/>Raspberry Pi Zero W</a></td><td>Make sure you get the <strong>W kind</strong> for WiFi access. Try to get one <strong>without the header pins</strong>, because you&rsquo;ll need those to be on the bottom.</td></tr><tr><td><a href=https://store.arduino.cc/arduino-nano>Arduino Nano</a></td><td>Or anything compatible.</td></tr><tr><td><a href=https://www.adafruit.com/product/736>Slip-ring</a></td><td>The chassis is designed to fit <strong>SRC022A-6 or SRC022A-12</strong> but can be modified relatively easily to fit something similar. If you can&rsquo;t get these, make sure yours have at least <strong>2 wires</strong> and is rated for at least <strong>2 amps and 12 volts</strong>.</td></tr><tr><td><a href=https://www.amazon.com/UL-Listed-Supply-Adapter-Wireless-Monitor/dp/B071NCHTM8>12V 2A DC power supply</a></td><td>With <strong>5.5*2.5mm</strong> barrel DC plug.</td></tr><tr><td>2 meters of AWG 24 wire</td><td>Should fit into the <a href=https://www.jst-mfg.com/product/pdf/eng/ePH.pdf>JST PH</a> connector&rsquo;s crimping terminal. Preferably in four colors (red, black, blue, green).</td></tr><tr><td>Crimping tool for JST PH connectors</td><td>You might be able to assemble the cables without this (<a href="https://www.youtube.com/watch?v=UD1h8ug3wQQ">video</a>) but it makes your life a lot easier if you can borrow one.</td></tr><tr><td>40 pin male 2-row header pin for the Raspberry</td><td>If you were able to get a Raspberry without the pins. (<a href=https://www.adafruit.com/product/3662>solderless connectors maybe?</a>)</td></tr><tr><td>ball bearings</td><td></td></tr><tr><td>nuts & bolts</td><td></td></tr></tbody></table><h2 id=soldering>Soldering
<a class=anchor href=#soldering>#</a></h2><p>TODO</p><ul><li>header pin to Raspberry</li><li>RPi+Arduino+A4988 onto main PCB</li><li>power-supply PCB</li></ul><h2 id=calibrating>Calibrating
<a class=anchor href=#calibrating>#</a></h2><h3 id=a4988-motor-current-tuning>A4988 motor current tuning
<a class=anchor href=#a4988-motor-current-tuning>#</a></h3><blockquote class="book-hint danger"><strong>WARNING!</strong>
Don&rsquo;t hook up your motors to the board until you&rsquo;ve completed this step!</blockquote><p>You need to tune the A4988 drivers to match your stepper motors' current
ratings. There&rsquo;s a pot on the A4988 driver board that lets you adjust the
maximum current delivered to the motor. Power up the PCB plugging the 12V
power supply into the on-board plug, then follow
<a href=https://ardufocus.com/howto/a4988-motor-current-tuning/>this guide</a>.</p><h2 id=cables>Cables
<a class=anchor href=#cables>#</a></h2><p>You need to craft five cables using the JST PH connectors. The LIDAR cable comes
with the LIDAR, you only need to replace the original connector on the non-LIDAR
side with a 6-pin JST PH connector.</p><p>Here&rsquo;s a video tutorial for crimping the terminals
<a href="https://www.youtube.com/watch?v=BMtQDWCH4kQ">with</a>
and
<a href="https://www.youtube.com/watch?v=UD1h8ug3wQQ">without</a>
a crimping tool.</p><p>Refer to the image below for the connections:</p><div style=text-align:center><img src=https://3dasd.com/images/cables-diagram.png style=max-width:90% alt data-zoomable></div><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h3 id=hall-sensors>Hall sensors</h3><p>Solder three cables to the three legs of the sensor. Use insulation sleeves or
tape to make sure the three legs won&rsquo;t touch.</div><div class="flex-even markdown-inner"><h3 id=motors>Motors</h3><p>Make sure you connect to the right places on the 6-pin side. 2nd and 5th places
are supposed to be empty.</div><div class="flex-even markdown-inner"><h3 id=lidar>LIDAR</h3><p>Cut the original connector from the LIDAR cable leaving around 18cm of the wires.
<strong>Don&rsquo;t remove the connector that goes into the LIDAR!</strong></div></div><p>My cables look like this, but I&rsquo;m sure you can do better! (;</p><div style=text-align:center><img src=https://3dasd.com/images/cables-photo.jpg style=max-width:50% alt data-zoomable></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/3dasd/3dasd.github.io/edit/master/content/content/docs/tutorials/electronics.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function select(element){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);}
document.querySelectorAll("pre code").forEach(code=>{code.addEventListener("click",function(event){select(code.parentElement);if(navigator.clipboard){navigator.clipboard.writeText(code.parentElement.textContent);}});});})();</script><script src=//unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js></script><script>mediumZoom('[data-zoomable]')</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#ordering-everything>Ordering everything</a><ul><li><a href=#getting-the-pcbs>Getting the PCBs</a></li><li><a href=#connectors-and-hall-sensor>Connectors and Hall sensor</a></li><li><a href=#rest-of-the-modules>Rest of the modules</a></li></ul></li><li><a href=#soldering>Soldering</a></li><li><a href=#calibrating>Calibrating</a><ul><li><a href=#a4988-motor-current-tuning>A4988 motor current tuning</a></li></ul></li><li><a href=#cables>Cables</a></li></ul></nav></div></aside></main></body></html>